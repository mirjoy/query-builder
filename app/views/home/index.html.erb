<h1 class="text-center">AlchemyAPI News Query Builder</h1>

<h4>Search millions of news and blog articles</h4>
<%= form_for(:home, url: home_index_path, method: :post) do |f| %>
  <p><%= f.label "Where " %>
  <%= f.text_field :news_query %></p>
  <p><%= f.label "Is mentioned as" %>
  <%= f.select :entity, options_for_select(@entities.each { |ent| ent }) %></p>
  <%= f.submit "Submit", class: "btn btn-success" %>
<% end %>

<% if @stories %>
  <%= @stories.each_with_index do |story, index| %>
    <h3>Story #<%= index + 1 %>: <%= link_to story.title, story.url %></h3>
    <p>Excerpt: <%= story.excerpt %></p>
    <p>Keywords: <%= story.keywords %></p>
    <p>Entities</p>
    <%= story.entities.each do |ent| %>
    <div class="row col-sm-12">
      Text: <%= ent.title %>
      Type: <%= ent.entity_type %>
      Sentiment: <%= ent.sentiment %></p>
    </div>
    <% end %>
    <p>Sentiment: <%= story.sentiment %></p>
    <p>Taxonomy: <%= story.taxonomy %></p>
  <% end %>
<% end %>
